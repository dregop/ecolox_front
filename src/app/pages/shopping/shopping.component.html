
<div id="add_product" style="display: none;" class="absolute left-0 right-0 top-0 bottom-0 lg:w-1/2 lg:h-1/4 h-1/3 w-3/4 flex flex-col z-50 m-auto items-center m-4 text-slate-800 pl-10 pr-8">
    <div id="date" class="basis-1/4 w-full text-center p-2 text-2xl font-semibold"><input id="date" type="datetime-local" class="rounded bg-slate-100" [ngModel]="selectedProduct.date | date:'yyyy-MM-ddTHH:mm'" (ngModelChange)="selectedProduct.date = $event" /></div>
    <div class="basis-3/4 flex flex-row items-center w-full">
        <div class="basis-2/3  text-center h-full flex flex-col items-center">
            <div id="name" class="basis-1/2 text-2xl font-semibold">{{ selectedProduct.name }}</div>
            <div id="co2" class="basis-1/2 text-xl font-semibold flex flex-row items-center border-t-2 border-stone-500">
                <img src="../../assets/co2.svg" width="70px" height="70px" class="mr-2">
                <div>
                    <span *ngIf="selectedProduct.co2ByKg < 3" class="bg-lime-500 rounded-full p-1">{{ selectedProduct.co2ByKg }} kg CO<sub>2</sub>e</span>
                    <span *ngIf="selectedProduct.co2ByKg > 3 && selectedProduct.co2ByKg < 8" class="bg-amber-400 rounded-full p-1">{{ selectedProduct.co2ByKg }} kg CO<sub>2</sub>e</span>
                    <span *ngIf="selectedProduct.co2ByKg > 8" class="bg-red-400 rounded-full p-1">{{ selectedProduct.co2ByKg }} kg CO<sub>2</sub>e</span>
                     / 1 kg de produit</div></div>
        </div>
        <div class="basis-1/3  text-center h-full flex flex-col items-center border-l-2 border-stone-500">
            <div id="weight">
                <h2 class="text-2xl font-semibold mt-8">Poids</h2>
                <input type="number" name="weight" [(ngModel)]="selectedProduct.weight" class="w-12 m-4 rounded bg-slate-100" min="1">
                <button class=" activated">kg</button>
                <button class="btn-weight">g</button>
            </div>
            <!-- <div id="quantity" class="basis-1/2">
                <h2>Quantité</h2>
                <input type="number" name="quantity" [(ngModel)]="selectedProduct.quantity"></div> -->
        </div>
    </div>
    <button id="addProductButton" class="basis-1/4 p-2 m-1 mb-2 text-base font-bold p-4" (click)="addProduct()">AJOUTER</button>

</div>

<div id="banner">
    <app-banner></app-banner>
</div>
<div id="container">
    <div id="menu">
        <app-menu></app-menu>
    </div>
    <div id="main" class="flex flex-row mt-12 border-4 border-lime-400">
        <div class="basis-1/2 p-4 text-center border-r-2 border-amber-400">

        <div class="flex flex-row items-center mt-2 no-wrap justify-center overflow-auto">
            <div class="category_activated">
                <img src="../../../assets/pizza.svg" width="45" height="45">
                <span>Nourriture</span>
            </div>
            <!-- <div class="category">
                <img src="../../../assets/coffee.svg" width="45" height="45">
                <span>Boisson</span>
            </div> -->
            <div class="category">
                <img src="../../../assets/shirt.svg" width="45" height="45">
                <span>Vêtements</span>
            </div>
            <div class="category">
                <img src="../../../assets/chair.svg" width="45" height="45">
                <span>Meubles</span>
            </div>
            <div class="category">
                <img src="../../../assets/tv.svg" width="45" height="45">
                <span>Electroniques</span>
            </div>
            <!-- <div class="category">
                <img src="../../../assets/medicine.svg" width="45" height="45">
                <span>Médicaments</span>
            </div>
            <div class="category">
                <img src="../../../assets/tools.svg" width="45" height="45">
                <span>Autres</span>
            </div> -->
        </div>

        <input #carSearchInput class="rounded-lg border-2 border-slate-500 bg-slate-300 p-1 pl-2 pr-2 mt-3 text-base cursor-default w-22 h-8 lg:min-w-[200px] min-w-[180px]" type="search" placeholder="Ajouter un produit">

        <!--  DropDown Starts  -->
        
        <div class="card">
            <p class="search" *ngIf="isSearching else search"><loader></loader></p>
            <ng-template #search>
                <div class="search">
                    <div *ngFor="let product of searchedProduct; trackBy: trackById" tappable (click)="setProductSelected(product)" class="search-result">
                        {{product}}
                    </div>     
                </div>
                <p class="search" *ngIf="searchedProduct && searchedProduct.length <= 0 && !isSearching">Aucun résultat</p>
            </ng-template>
        </div>
        
        <!--  DropDown Ends  -->

            <h2 class="mt-8 font-semibold">Listes des Produits achetés</h2>
            <div class="w-full h-1/2 overflow-auto p-2">
                <loader *ngIf="loadingData"></loader>
                <div *ngFor="let product of dbProducts.reverse(); index as i" class="flex flex-row border-2 m-2 h-14 items-center">
                    <div class="basis-2/6 flex flex-row items-center">
                        <button class="mr-2" (click)="removeProduct(i, product)"><img src="../../../assets/trash.svg" width="25" height="25"></button>
                        <span>{{product.date | date:'dd/MM/yyyy HH:mm'}}</span>
                    </div>
                    <div class="basis-3/6">{{product.name}}</div>
                    <div class="basis-1/6" *ngIf="product.co2ByKg && product.weight">
                        <span *ngIf="product.co2ByKg < 3" class="bg-lime-500 rounded-full p-1">{{ product.co2ByKg }}</span>
                        <span *ngIf="product.co2ByKg > 3 && product.co2ByKg < 8" class="bg-amber-400 rounded-full p-1">{{ product.co2ByKg }}</span>
                        <span *ngIf="product.co2ByKg > 8" class="bg-red-400 rounded-full p-1">{{ product.co2ByKg }}</span> kg CO<sub>2</sub>e
                    </div>
                </div>
            </div>
        </div>
        <div class="basis-1/2 p-4 text-center">
            <input class="rounded-lg border-2 border-slate-500 bg-slate-300 p-1 pl-2 pr-2 mt-3 lg:text-lg text-base font-bold cursor-default w-22 h-8 lg:min-w-[200px] min-w-[180px]" type="search" placeholder="Rechercher un objet">
        </div>
    </div>
</div>

<div id="toast">
    <span>{{ toastService.toastMessage }}</span>
</div>